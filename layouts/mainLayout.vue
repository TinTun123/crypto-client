<template>
    <div class="">
        <div class="border-b border-[#C1C1C1]">
            <div v-if="!auth.isAdmin" class="flex justify-between gap-x-4 h-[56px] md:w-[67%] mx-auto p-4">
                <div>
                    <svg width="66" height="28" viewBox="0 0 66 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="0.5" y="0.5" width="65" height="27" rx="3.5" fill="#222222"/>
                        <path d="M13.328 20V8.8H15.92V17.888H21.536V20H13.328ZM26.8574 20.128C25.94 20.128 25.124 19.936 24.4094 19.552C23.7054 19.168 23.1454 18.6453 22.7294 17.984C22.324 17.312 22.1214 16.5493 22.1214 15.696C22.1214 14.832 22.324 14.0693 22.7294 13.408C23.1454 12.736 23.7054 12.2133 24.4094 11.84C25.124 11.456 25.94 11.264 26.8574 11.264C27.764 11.264 28.5747 11.456 29.2894 11.84C30.004 12.2133 30.564 12.7307 30.9694 13.392C31.3747 14.0533 31.5774 14.8213 31.5774 15.696C31.5774 16.5493 31.3747 17.312 30.9694 17.984C30.564 18.6453 30.004 19.168 29.2894 19.552C28.5747 19.936 27.764 20.128 26.8574 20.128ZM26.8574 18.08C27.2734 18.08 27.6467 17.984 27.9774 17.792C28.308 17.6 28.5694 17.328 28.7614 16.976C28.9534 16.6133 29.0494 16.1867 29.0494 15.696C29.0494 15.1947 28.9534 14.768 28.7614 14.416C28.5694 14.064 28.308 13.792 27.9774 13.6C27.6467 13.408 27.2734 13.312 26.8574 13.312C26.4414 13.312 26.068 13.408 25.7374 13.6C25.4067 13.792 25.14 14.064 24.9374 14.416C24.7454 14.768 24.6494 15.1947 24.6494 15.696C24.6494 16.1867 24.7454 16.6133 24.9374 16.976C25.14 17.328 25.4067 17.6 25.7374 17.792C26.068 17.984 26.4414 18.08 26.8574 18.08ZM37.2938 23.232C36.4831 23.232 35.6991 23.1307 34.9418 22.928C34.1951 22.736 33.5711 22.4427 33.0698 22.048L34.0618 20.256C34.4244 20.5547 34.8831 20.7893 35.4378 20.96C36.0031 21.1413 36.5578 21.232 37.1018 21.232C37.9871 21.232 38.6271 21.0347 39.0218 20.64C39.4271 20.2453 39.6298 19.6587 39.6298 18.88V17.584L39.7898 15.424L39.7578 13.248V11.392H42.1258V18.56C42.1258 20.16 41.7098 21.3387 40.8778 22.096C40.0458 22.8533 38.8511 23.232 37.2938 23.232ZM36.9098 19.584C36.1098 19.584 35.3844 19.4133 34.7338 19.072C34.0938 18.72 33.5764 18.2347 33.1818 17.616C32.7978 16.9867 32.6058 16.256 32.6058 15.424C32.6058 14.5813 32.7978 13.8507 33.1818 13.232C33.5764 12.6027 34.0938 12.1173 34.7338 11.776C35.3844 11.4347 36.1098 11.264 36.9098 11.264C37.6351 11.264 38.2751 11.4133 38.8298 11.712C39.3844 12 39.8164 12.4533 40.1258 13.072C40.4351 13.68 40.5898 14.464 40.5898 15.424C40.5898 16.3733 40.4351 17.1573 40.1258 17.776C39.8164 18.384 39.3844 18.8373 38.8298 19.136C38.2751 19.4347 37.6351 19.584 36.9098 19.584ZM37.4058 17.536C37.8431 17.536 38.2324 17.4507 38.5738 17.28C38.9151 17.0987 39.1818 16.848 39.3738 16.528C39.5658 16.208 39.6618 15.84 39.6618 15.424C39.6618 14.9973 39.5658 14.6293 39.3738 14.32C39.1818 14 38.9151 13.7547 38.5738 13.584C38.2324 13.4027 37.8431 13.312 37.4058 13.312C36.9684 13.312 36.5791 13.4027 36.2378 13.584C35.8964 13.7547 35.6244 14 35.4218 14.32C35.2298 14.6293 35.1338 14.9973 35.1338 15.424C35.1338 15.84 35.2298 16.208 35.4218 16.528C35.6244 16.848 35.8964 17.0987 36.2378 17.28C36.5791 17.4507 36.9684 17.536 37.4058 17.536ZM48.5449 20.128C47.6275 20.128 46.8115 19.936 46.0969 19.552C45.3929 19.168 44.8329 18.6453 44.4169 17.984C44.0115 17.312 43.8089 16.5493 43.8089 15.696C43.8089 14.832 44.0115 14.0693 44.4169 13.408C44.8329 12.736 45.3929 12.2133 46.0969 11.84C46.8115 11.456 47.6275 11.264 48.5449 11.264C49.4515 11.264 50.2622 11.456 50.9769 11.84C51.6915 12.2133 52.2515 12.7307 52.6569 13.392C53.0622 14.0533 53.2649 14.8213 53.2649 15.696C53.2649 16.5493 53.0622 17.312 52.6569 17.984C52.2515 18.6453 51.6915 19.168 50.9769 19.552C50.2622 19.936 49.4515 20.128 48.5449 20.128ZM48.5449 18.08C48.9609 18.08 49.3342 17.984 49.6649 17.792C49.9955 17.6 50.2569 17.328 50.4489 16.976C50.6409 16.6133 50.7369 16.1867 50.7369 15.696C50.7369 15.1947 50.6409 14.768 50.4489 14.416C50.2569 14.064 49.9955 13.792 49.6649 13.6C49.3342 13.408 48.9609 13.312 48.5449 13.312C48.1289 13.312 47.7555 13.408 47.4249 13.6C47.0942 13.792 46.8275 14.064 46.6249 14.416C46.4329 14.768 46.3369 15.1947 46.3369 15.696C46.3369 16.1867 46.4329 16.6133 46.6249 16.976C46.8275 17.328 47.0942 17.6 47.4249 17.792C47.7555 17.984 48.1289 18.08 48.5449 18.08Z" fill="#F7F7FF"/>
                        <rect x="0.5" y="0.5" width="65" height="27" rx="3.5" stroke="#F7F7FF"/>
                    </svg>
                </div>


                <div class="flex gap-x-2 items-center relative">
                    <div class="w-[36px] aspect-square">
                        <img src="../assets/profile.png" alt="">
                    </div>

                    <span @click.stop="toogleprofile" class="font-[400] text-[12px] text-[#000000]">
                        {{ auth.user.name }}
                    </span>

                    <div v-if="dropProfile" :class="[dropProfile ? 'max-h-[1000px]' : 'max-h-0']" class="bg-white absolute top-[36px] overflow-hidden right-0 shadow-2xl flex flex-col gap-y-2 transition-all rounded-[16px]">
                        <span  class="text-[12px] font-400 text-[#222222] border-b border-black/20 lg:cursor-pointer lg:hover:bg-black/10 transition p-2">edit profile</span>
                        <span @click.stop="auth.logout" class="text-[12px] font-400 text-[#222222] lg:cursor-pointer lg:hover:bg-black/10 transition p-2">logout</span>
                    </div>
                </div>

            </div>


            <div v-if="auth.isAdmin" class="flex justify-between gap-x-4 h-[56px] md:w-[67%] mx-auto p-4">
                <div class="flex gap-x-4">

                    <NuxtLink to="/users">
                        <span :class="[route.name === 'users' ? 'text-[#222222]' : 'text-[#222222]/60']" class="text-[14px]  font-[500]">
                            Users
                        </span>
                    </NuxtLink>
                    
                    <NuxtLink to="/transcation">
                        <span :class="[route.name === 'transcation' ? 'text-[#222222]' : 'text-[#222222]/60']" class="text-[14px] text-[#222222] font-[500]">
                            Transcations
                        </span>
                    </NuxtLink>
                    
                </div>

                <div class="flex gap-x-4">

                    <span class="font-[500] text-[14px] text-[#3C67FF]">
                        Edit
                    </span>
                    
                    <span class="font-[500] text-[14px] text-[#EC0F0F]">
                        Delete
                    </span>

                    <div @click.stop="auth.logout" class="font-[500] lg:cursor-pointer text-[14px]">
                        Logout
                    </div>
                </div>


            </div>
        </div>


        <slot />
    </div>


    <Teleport to="body">
        <send />
    </Teleport>

    <Teleport to="body">
        <receive />
    </Teleport>
</template>

<script setup>
import { useAuthStore } from '~/stores/useAuthStore';


const auth = useAuthStore();
const dropProfile = ref(false);
const route = useRoute();

const logout = async () => {
    await auth.logout();
}


const toogleprofile = () => {
    dropProfile.value = !dropProfile.value;
}

</script>

<style>

</style>